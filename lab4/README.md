# Лабораторная работа #4: Построение SSA

Проект представляет собой реализацию компилятора с построением SSA-формы:
- Реализация графа потока управления (CFG)
- Простое промежуточное представление (IR) 
- Построение SSA-формы
- Автоматическая генерация графов с помощью GraphViz
- Интерактивные графы с использованием D3.js
- Парсер простого языка программирования

## Требования

- Python 3.6+
- NetworkX (для построения графов)
- GraphViz (для визуализации)

## Установка зависимостей

```bash
pip install -r requirements.txt
```

## Использование

Запустите скрипт `run.py`:

```bash
python run.py [путь_к_файлу]
```

Если указан путь к файлу, скрипт будет анализировать его содержимое.
Иначе будут использованы встроенные примеры программ.

Программа генерирует следующие файлы в директории `results/`:
- `example1_cfg.dot` и `example1_cfg.png` - граф потока управления для примера 1
- `example1_cfg_interactive.html` - интерактивный граф потока управления для примера 1
- `example1_ssa.dot` и `example1_ssa.png` - SSA-форма для примера 1
- `example1_ssa_interactive.html` - интерактивная SSA-форма для примера 1
- `example2_cfg.dot` и `example2_cfg.png` - граф потока управления для примера 2
- `example2_cfg_interactive.html` - интерактивный граф потока управления для примера 2
- `example2_ssa.dot` и `example2_ssa.png` - SSA-форма для примера 2
- `example2_ssa_interactive.html` - интерактивная SSA-форма для примера 2
- `example3_cfg.dot` и `example3_cfg.png` - граф потока управления для примера 3
- `example3_cfg_interactive.html` - интерактивный граф потока управления для примера 3
- `example3_ssa.dot` и `example3_ssa.png` - SSA-форма для примера 3
- `example3_ssa_interactive.html` - интерактивная SSA-форма для примера 3

## Синтаксис входного языка

Парсер поддерживает следующий синтаксис:

```
# Присваивание
x = 10

# Арифметические операции
y = x + 5
z = x * y
w = z - 2

# Условный оператор
if x > y then
    max = x
else
    max = y
end

# Цикл
i = 0
sum = 0
while i < 5 do
    sum = sum + i
    i = i + 1
end

# Возврат значения
return sum
```

## Структура проекта

- `IR.py` - определения инструкций промежуточного представления и примеры программ
- `BB.py` - реализация базовых блоков
- `ssa.py` - построение SSA-формы
- `parser.py` - парсер языка программирования
- `run.py` - главный скрипт для запуска и генерации графов
- `requirements.txt` - зависимости проекта

## Примеры программ

В файле `IR.py` реализованы три примера программ:

### Пример 1: Ветвление и арифметические операции (из `example()`)

```
a = 10
b = 5
if a > b then
    a = a - b
else
    b = b - a
c = a + b
if c > 0 then
    c = c * 2
else
    c = 0
return c
```

### Пример 2: Цикл с суммированием (из `example1()`)

```
i = 0
sum = 0
while i < 5 do
    sum = sum + i
    i = i + 1
return sum
```

### Пример 3: Вложенные условия (из `example2()`)

```
x = 10
y = 20
z = 5

if x > y then
    if x > z then
        max = x
    else
        max = z
else
    if y > z then
        max = y
    else
        max = z

return max
```

## Особенности реализации

- Используется алгоритм постановки phi-функций на основе границ доминирования
- Для обновления версий переменных используется рекурсивный обход графа потока управления
- Граф CFG строится с использованием библиотеки NetworkX
- Генерация визуального представления графов выполняется с помощью GraphViz
- Интерактивные графы создаются с использованием D3.js
- Корректно обрабатываются циклические графы с обратными рёбрами
- Реализован парсер для простого языка программирования 